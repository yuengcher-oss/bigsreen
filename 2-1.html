<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <title>äº§å“åˆ›æ–° - ä¸“åˆ©ç«äº‰æ ¼å±€</title>
    <link
        href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Noto+Sans+SC:wght@300;400;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="shared/system.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/echarts/5.4.3/echarts.min.js"></script>
    <script src="./data/patents_data.js"></script>
    <script src="./data/ranking_data.js"></script>
    <style>
        :root {
            --primary-red: #e60012;
            --brand-red: #e60012;
            --primary-blue: #0066ff;
            --primary-yellow: #fadb14;
            --bg-dark: #050a10;
            --card-bg: rgba(255, 255, 255, 0.05);
            --border-color: rgba(230, 0, 18, 0.2);
        }

        body {
            background: var(--bg-dark);
            color: #fff;
            font-family: 'Noto Sans SC', sans-serif;
            margin: 0;
            padding: 12px 12px;
            /* ç¼©å°å…¨å±€å†…è¾¹è· */
            height: 100vh;
            display: flex;
            flex-direction: column;
            gap: 12px;
            /* ç¼©å°æ¨¡å—é—´è· */
            box-sizing: border-box;
            overflow: hidden;
        }

        /* --- é¡¶éƒ¨æŒ‡æ ‡å¡ç‰‡ --- */
        .stats-container {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            /* æ”¹ä¸º 5 åˆ— */
            gap: 12px;
        }

        .stat-card {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.08), rgba(255, 255, 255, 0.02));
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 12px 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            position: relative;
            overflow: hidden;
            transition: transform 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-2px);
            border-color: var(--primary-red);
        }

        .stat-card:hover .stat-value,
        .stat-card:hover .stat-label {
            color: var(--primary-red);
            text-shadow: 0 0 10px rgba(230, 0, 18, 0.3);
        }

        .stat-card::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 3px;
            height: 100%;
            background: var(--primary-red);
        }

        .stat-icon {
            font-size: 24px;
            /* è¿›ä¸€æ­¥ç¼©å° */
            opacity: 0.8;
            width: 38px;
            /* è¿›ä¸€æ­¥ç¼©å° */
            height: 38px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(230, 0, 18, 0.1);
            border-radius: 50%;
        }

        .stat-info {
            display: flex;
            flex-direction: column;
        }

        .stat-value {
            font-family: 'Orbitron', sans-serif;
            font-size: 28px;
            /* ç¼©å°å­—å·ä»¥é€‚åº” 5 åˆ— */
            font-weight: 700;
            color: #fff;
            line-height: 1;
            text-shadow: 0 0 10px rgba(230, 0, 18, 0.4);
        }

        .stat-label {
            font-size: 14px;
            color: rgba(255, 255, 255, 0.6);
            margin-top: 8px;
        }

        /* --- ä¸­é—´æ ¸å¿ƒåŒº --- */
        .middle-container {
            display: flex;
            gap: 12px;
            flex: 1.3;
            /* å¢åŠ ä¸­é—´å æ¯” */
            min-height: 0;
            overflow: hidden; /* é˜²æ­¢å­å…ƒç´ æº¢å‡º */
        }

        .ranking-panel {
            flex: 6;
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 12px 20px;
            /* ç¼©å° Padding */
            display: flex;
            flex-direction: column;
            min-width: 0;
            overflow: hidden;
        }

        .panel-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }

        .panel-title {
            font-size: 15px;
            /* ç¼©å°æ ‡é¢˜ */
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .panel-title::before {
            content: '';
            width: 3px;
            height: 14px;
            background: var(--primary-red);
        }

        .update-time {
            font-size: 11px;
            color: rgba(255, 255, 255, 0.4);
        }

        .ranking-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 13px;
            flex: 1; /* å æ®å‰©ä½™æ‰€æœ‰ç©ºé—´ */
            height: 100%;
        }

        .ranking-table th {
            text-align: center;
            color: #fff;
            padding: 8px;
            /* æç®€å¡«å…… */
            border: 1px solid rgba(255, 255, 255, 0.2);
            font-weight: 400;
            background: rgba(230, 0, 18, 0.6); /* çº¢è‰²èƒŒæ™¯è¡¨å¤´ */
            height: 40px; /* å›ºå®šè¡¨å¤´é«˜åº¦ */
        }

        .ranking-table td {
            padding: 4px 8px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .ranking-table tr {
            height: auto; /* å…è®¸è‡ªåŠ¨åˆ†é…é«˜åº¦ */
        }

        .ranking-table tr.highlight {
            background: #fff;
            font-weight: 900;
            font-size: 18px;
            /* å¢å¤§å­—ä½“ */
        }

        .ranking-table tr.highlight td {
            color: var(--brand-red);
            border: 1px solid var(--brand-red);
            text-shadow: none;
        }

        .trend-sparkline {
            width: 80px;
            height: 30px;
            /* ç¼©å° Sparkline */
        }

        /* å‘ä¸Šå¢é•¿ç®­å¤´åŠ¨ç”» */
        .up-arrow {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 28px;
            /* å¢åŠ å›ºå®šå®½é«˜å½¢æˆèƒŒæ™¯ */
            height: 28px;
            background: var(--brand-red);
            /* çº¢è‰²èƒŒæ™¯ */
            border-radius: 4px;
            color: #fff;
            /* ç®­å¤´å˜ä¸ºç™½è‰² */
            font-size: 20px;
            filter: drop-shadow(0 0 12px rgba(230, 0, 18, 0.9));
            animation: arrowJump 0.8s infinite alternate ease-in-out;
            /* æ”¹ä¸ºæ›´è½»å¿«çš„è·³åŠ¨åŠ¨ç”» */
            vertical-align: middle;
            margin-left: 15px;
            box-shadow: 0 0 15px rgba(230, 0, 18, 0.4);
        }

        .up-arrow svg {
            width: 18px;
            height: 18px;
            fill: currentColor;
            transform: rotate(-90deg);
            /* æ—‹è½¬å‘ä¸Šçš„å®å¿ƒç®­å¤´ */
        }

        @keyframes arrowJump {
            0% {
                transform: translateY(2px);
                filter: drop-shadow(0 0 5px rgba(230, 0, 18, 0.6));
            }

            100% {
                transform: translateY(-4px);
                filter: drop-shadow(0 0 15px rgba(230, 0, 18, 1));
            }
        }

        @keyframes arrowUp {
            0% {
                transform: translateY(0);
                opacity: 0.6;
            }

            50% {
                transform: translateY(-4px);
                opacity: 1;
            }

            100% {
                transform: translateY(0);
                opacity: 0.6;
            }
        }

        .word-cloud-panel {
            flex: 4;
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 12px 16px;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            gap: 12px;
            min-width: 0;
        }

        /* åˆä½œé«˜æ ¡åŒºåŸŸ - å›ºå®šé«˜åº¦æ¯”ä¾‹ */
        .partners-container {
            flex: 0 0 auto; /* ä¸ç¼©æ”¾ï¼Œç”±å†…å®¹æˆ–é«˜åº¦å†³å®š */
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .partners-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            padding: 5px;
        }

        .partner-item {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.05);
            border-radius: 6px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 10px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            aspect-ratio: 16/9; /* ä¿æŒå®½é«˜æ¯” */
        }

        .partner-item:hover {
            background: rgba(230, 0, 18, 0.05);
            border-color: rgba(230, 0, 18, 0.3);
            transform: scale(1.05);
        }

        .partner-logo {
            width: 100%;
            height: 40px;
            object-fit: contain;
            filter: grayscale(1) brightness(1.5) contrast(1.2);
            transition: all 0.3s ease;
            margin-bottom: 8px;
        }

        .partner-item:hover .partner-logo {
            filter: grayscale(0) brightness(1);
        }

        .partner-name {
            font-size: 12px;
            color: rgba(255, 255, 255, 0.6);
            text-align: center;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            width: 100%;
        }

        /* æ‹¥æœ‰ä¸“åˆ©åŒºåŸŸ - å¼¹æ€§é€‚åº” */
        .patents-section {
            display: flex;
            flex-direction: column;
            flex: 1; /* å æ®å‰©ä½™ç©ºé—´ */
            min-height: 0; /* å…è®¸é«˜åº¦æ”¶ç¼© */
            overflow: hidden;
        }

        /* ä¸“åˆ©è½®æ’­åˆ—è¡¨æ ·å¼ */
        .patent-carousel-container {
            flex: 1; /* å¡«æ»¡çˆ¶å®¹å™¨ */
            overflow: hidden;
            position: relative;
            margin-top: 10px;
            background: rgba(255, 255, 255, 0.02);
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.05);
            /* å½“ç©ºé—´ä¸è¶³æ—¶ï¼Œç¡®ä¿è‡³å°‘èƒ½æ˜¾ç¤ºå‡ æ¡ */
            min-height: 100px;
        }

        .patent-list {
            position: absolute;
            width: 100%;
            top: 0;
            left: 0;
            padding: 10px;
        }

        .patent-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px 15px;
            margin-bottom: 8px;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 8px;
            border-left: 3px solid var(--brand-red);
            transition: all 0.3s ease;
        }

        .patent-item:hover {
            background: rgba(230, 0, 18, 0.1);
            transform: translateX(5px);
        }

        .patent-name {
            color: rgba(255, 255, 255, 0.9);
            font-size: 13px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            margin-right: 15px;
            flex: 1;
        }

        .patent-tag {
            font-size: 11px;
            padding: 2px 8px;
            border-radius: 4px;
            background: rgba(230, 0, 18, 0.2);
            color: var(--brand-red);
            border: 1px solid rgba(230, 0, 18, 0.3);
            white-space: nowrap;
        }

        .patent-tag.invention {
            background: rgba(0, 102, 255, 0.2);
            color: #0066ff;
            border-color: rgba(0, 102, 255, 0.3);
        }

        /* æ¸å˜é®ç½© */
        .patent-carousel-container::before,
        .patent-carousel-container::after {
            content: '';
            position: absolute;
            left: 0;
            right: 0;
            height: 40px;
            z-index: 2;
            pointer-events: none;
        }

        .patent-carousel-container::before {
            top: 0;
            background: linear-gradient(to bottom, #050a10 0%, transparent 100%);
        }

        .patent-carousel-container::after {
            bottom: 0;
            background: linear-gradient(to top, #050a10 0%, transparent 100%);
        }

        /* --- åº•éƒ¨åŒº --- */
        .bottom-container {
            flex: 1;
            /* æ”¹ä¸º Flex æ¯”ä¾‹è€Œéå›ºå®šåƒç´  */
            min-height: 200px;
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 12px 16px;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        #trendChart {
            flex: 1;
            width: 100%;
            min-height: 0; /* å…è®¸é«˜åº¦è‡ªé€‚åº”å¡«å……å‰©ä½™ç©ºé—´ */
            margin-top: 10px;
            margin-bottom: 10px;
        }

        /* è¶‹åŠ¿å›¾ä¸‹æ–¹æ•°æ®è¡¨ */
        .trend-data-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 0; /* å‡å°é—´è· */
            font-size: 12px; /* ç¨å¾®ç¼©å°å­—å· */
            background: rgba(255, 255, 255, 0.02);
            border-radius: 4px;
            overflow: hidden;
        }

        .trend-data-table th,
        .trend-data-table td {
            padding: 8px 4px; /* å‹ç¼©å†…è¾¹è· */
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        .trend-data-table th {
            background: rgba(255, 255, 255, 0.05);
            color: #fff; /* æ–‡å­—æ”¹ä¸ºç™½è‰² */
            font-weight: 400;
        }

        .trend-data-table td {
            color: #fff; /* æ–‡å­—æ”¹ä¸ºç™½è‰² */
            font-family: 'Orbitron', sans-serif;
        }

        .trend-data-table .row-label {
            text-align: center;
            padding-left: 10px;
            color: #fff; /* æ–‡å­—æ”¹ä¸ºç™½è‰² */
            font-family: 'Noto Sans SC', sans-serif;
            font-weight: 700;
            width: 100px;
        }

        .trend-data-table .highlight-cell {
            color: #fff;
            background: rgba(230, 0, 18, 0.1);
        }

        /* å›¾æ ‡å ä½ */
        .icon {
            font-style: normal;
        }
    </style>
</head>

<body>
    <!-- 1. é¡¶éƒ¨æŒ‡æ ‡å¡ç‰‡ -->
    <div class="stats-container">
        <div class="stat-card">
            <div class="stat-icon">ğŸ“œ</div>
            <div class="stat-info">
                <span class="stat-value">378</span>
                <span class="stat-label">æ‹¥æœ‰ä¸“åˆ©æ€»æ•°</span>
            </div>
        </div>
        <div class="stat-card">
            <div class="stat-icon">ğŸ”¬</div>
            <div class="stat-info">
                <span class="stat-value">72</span>
                <span class="stat-label">å‘æ˜ä¸“åˆ©å®å®¡ä¸­</span>
            </div>
        </div>
        <div class="stat-card">
            <div class="stat-icon">ğŸ‡¨ğŸ‡³</div>
            <div class="stat-info">
                <span class="stat-value">5</span>
                <span class="stat-label">å‚ä¸åˆ¶å®šå›½å®¶æ ‡å‡†</span>
            </div>
        </div>
        <div class="stat-card">
            <div class="stat-icon">âš™ï¸</div>
            <div class="stat-info">
                <span class="stat-value">8</span>
                <span class="stat-label">å‚ä¸åˆ¶å®šè¡Œä¸šæ ‡å‡†</span>
            </div>
        </div>
        <div class="stat-card">
            <div class="stat-icon">ğŸ†</div>
            <div class="stat-info">
                <span class="stat-value">34</span>
                <span class="stat-label">è¡Œä¸šé¢†å…ˆäº§å“</span>
            </div>
        </div>
    </div>

    <!-- 2. ä¸­é—´æ ¸å¿ƒåŒº -->
    <div class="middle-container">
        <!-- å·¦ä¾§æ’åçœ‹æ¿ -->
        <div class="ranking-panel">
            <div class="panel-header">
                <div class="panel-title">è¡Œä¸šä¸“åˆ©ç«äº‰æ’åå®æ—¶çœ‹æ¿</div>
                <div class="update-time" id="lastUpdateTime">æ•°æ®æœ€åæ›´æ–°ï¼š2åˆ†é’Ÿå‰</div>
            </div>
            <table class="ranking-table">
                <thead>
                    <tr>
                        <th rowspan="2">åºå·</th>
                        <th rowspan="2">å…¬å¸åç§°</th>
                        <th rowspan="2">æœ‰æ•ˆæˆæƒ<br>ä¸“åˆ©åˆè®¡</th>
                        <th rowspan="2">å®ç”¨æ–°å‹<br>æˆæƒ</th>
                        <th rowspan="2">å‘æ˜æˆæƒ<br>æƒ</th>
                        <th rowspan="2">å‘æ˜å®¡ä¸­</th>
                        <th colspan="6">è¿‘äº”å¹´æˆæƒæ•°é‡</th>
                    </tr>
                    <tr>
                        <th>2025</th>
                        <th>2024</th>
                        <th>2023</th>
                        <th>2022</th>
                        <th>2021</th>
                        <th>åˆè®¡</th>
                    </tr>
                </thead>
                <tbody id="rankingBody">
                    <!-- æ•°æ®è¡Œå°†é€šè¿‡ JS åŠ¨æ€å¡«å…… -->
                </tbody>
            </table>
        </div>

        <!-- å³ä¾§è¯äº‘å›¾ -->
        <div class="word-cloud-panel">
            <div class="partners-container">
                <div class="panel-title">äº§å­¦ç ”åˆä½œé«˜æ ¡</div>
                <div class="partners-grid">
                    <div class="partner-item">
                        <img src="https://minio-api.cgboiler.com/form-test/%E6%96%B0%E7%96%86%E5%A4%A7%E5%AD%A6.png" alt="æ–°ç–†å¤§å­¦" class="partner-logo">
                        <span class="partner-name">æ–°ç–†å¤§å­¦</span>
                    </div>
                    <div class="partner-item">
                        <img src="https://minio-api.cgboiler.com/form-test/%E4%B8%9C%E5%8D%97%E5%A4%A7%E5%AD%A6.png" alt="ä¸œå—å¤§å­¦" class="partner-logo">
                        <span class="partner-name">ä¸œå—å¤§å­¦</span>
                    </div>
                    <div class="partner-item">
                        <img src="https://minio-api.cgboiler.com/form-test/%E4%B8%AD%E5%9B%BD%E7%9F%BF%E4%B8%9A%E5%A4%A7%E5%AD%A6.png" alt="ä¸­å›½çŸ¿ä¸šå¤§å­¦" class="partner-logo">
                        <span class="partner-name">ä¸­å›½çŸ¿ä¸šå¤§å­¦</span>
                    </div>
                    <div class="partner-item">
                        <img src="https://minio-api.cgboiler.com/form-test/%E5%8C%97%E4%BA%AC%E7%A7%91%E6%8A%80%E5%A4%A7%E5%AD%A6.png" alt="åŒ—äº¬ç§‘æŠ€å¤§å­¦" class="partner-logo">
                        <span class="partner-name">åŒ—äº¬ç§‘æŠ€å¤§å­¦</span>
                    </div>
                    <div class="partner-item">
                        <img src="https://minio-api.cgboiler.com/form-test/%E5%A4%A9%E6%B4%A5%E5%A4%A7%E5%AD%A6.png" alt="å¤©æ´¥å¤§å­¦" class="partner-logo">
                        <span class="partner-name">å¤©æ´¥å¤§å­¦</span>
                    </div>
                    <div class="partner-item">
                        <img src="https://minio-api.cgboiler.com/form-test/%E6%98%86%E6%98%8E%E7%90%86%E5%B7%A5%E5%A4%A7%E5%AD%A6.png" alt="æ˜†æ˜ç†å·¥å¤§å­¦" class="partner-logo">
                        <span class="partner-name">æ˜†æ˜ç†å·¥å¤§å­¦</span>
                    </div>
                </div>
            </div>
            
            <div class="patents-section">
                <div class="panel-title">æ‹¥æœ‰ä¸“åˆ©</div>
                <div class="patent-carousel-container" id="patentCarousel">
                    <div class="patent-list" id="patentList">
                        <!-- åŠ¨æ€ç”Ÿæˆä¸“åˆ©åˆ—è¡¨ -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 3. åº•éƒ¨è¶‹åŠ¿å›¾ -->
    <div class="bottom-container">
        <div class="panel-title">è¿‘äº”å¹´ä¸“åˆ©åˆ†ç±»èµ°åŠ¿åˆ†æ</div>
        <div id="trendChart"></div>
        <table class="trend-data-table" id="trendDataTable">
            <!-- åŠ¨æ€ç”Ÿæˆ -->
        </table>
    </div>

    <script>
        // --- å¡«å……è¡¨æ ¼ ---
        function renderTable() {
            const body = document.getElementById('rankingBody');
            const data = window.rankingData; // Use data from ranking_data.js
            
            if (!data) return;

            body.innerHTML = data.map(c => `
                <tr class="${c.isSelf ? 'highlight' : ''}">
                    <td>${c.id}</td>
                    <td>${c.name}</td>
                    <td>${c.total}</td>
                    <td>${c.utility}</td>
                    <td>${c.invention}</td>
                    <td>${c.pending}</td>
                    <td>${c.years.y2025}</td>
                    <td>${c.years.y2024}</td>
                    <td>${c.years.y2023}</td>
                    <td>${c.years.y2022}</td>
                    <td>${c.years.y2021}</td>
                    <td>${c.sum5}</td>
                </tr>
            `).join('');
        }

        // --- æ¸²æŸ“ Sparkline (å·²ç§»é™¤ï¼Œæ•°æ®ç›´æ¥å±•ç¤º) ---
        // function renderSparkline(containerId, data, isSelf) { ... }

        // --- ä¸“åˆ©è½®æ’­é€»è¾‘ ---
        function initPatentCarousel() {
            const listContainer = document.getElementById('patentList');
            const data = window.patentsData;
            if (!listContainer || !data) return;

            // æ¸²æŸ“ä¸“åˆ©é¡¹
            const renderPatents = (items) => {
                return items.map(item => `
                    <div class="patent-item">
                        <span class="patent-name" title="${item.name}">${item.name}</span>
                        <span class="patent-tag ${item.type === 'å‘æ˜' ? 'invention' : ''}">${item.type}</span>
                    </div>
                `).join('');
            };

            // å¡«å……å†…å®¹
            listContainer.innerHTML = renderPatents(data) + renderPatents(data);

            let currentTop = 0;
            const scrollSpeed = 0.3;
            
            // åŠ¨æ€è·å–æ€»é«˜åº¦ï¼ˆç¬¬ä¸€ç»„çš„é«˜åº¦ï¼‰
            const firstGroupHeight = listContainer.scrollHeight / 2;

            function scroll() {
                currentTop -= scrollSpeed;
                if (Math.abs(currentTop) >= firstGroupHeight) {
                    currentTop = 0;
                }
                listContainer.style.transform = `translateY(${currentTop}px)`;
                animationId = requestAnimationFrame(scroll);
            }

            let animationId = requestAnimationFrame(scroll);
            const container = document.getElementById('patentCarousel');
            container.onmouseenter = () => cancelAnimationFrame(animationId);
            container.onmouseleave = () => animationId = requestAnimationFrame(scroll);
        }

        // --- åº•éƒ¨è¶‹åŠ¿å›¾ ---
        function initTrendChart() {
            const years = ['2021', '2022', '2023', '2024', '2025', '2026P'];

            // æ¨¡æ‹Ÿæ•°æ®
            const inventionDataActual = [20, 35, 62, 85, 110, 150];
            const utilityData = [150, 180, 220, 280, 351, 420];
            const designData = [10, 12, 15, 18, 25, 35];

            // å¡«å……æ•°æ®è¡¨
            const table = document.getElementById('trendDataTable');
            table.innerHTML = `
                <thead>
                    <tr>
                        <th>ç»Ÿè®¡ç»´åº¦</th>
                        ${years.map(y => `<th>${y}</th>`).join('')}
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td class="row-label">å‘æ˜ä¸“åˆ©</td>
                        ${inventionDataActual.map(v => `<td>${v}</td>`).join('')}
                    </tr>
                    <tr>
                        <td class="row-label">å®ç”¨æ–°å‹</td>
                        ${utilityData.map(v => `<td>${v}</td>`).join('')}
                    </tr>
                    <tr>
                        <td class="row-label">å¤–è§‚è®¾è®¡</td>
                        ${designData.map(v => `<td>${v}</td>`).join('')}
                    </tr>
                </tbody>
            `;

            const chart = echarts.init(document.getElementById('trendChart'));
            chart.setOption({
                tooltip: {
                    trigger: 'axis',
                    backgroundColor: 'rgba(5, 10, 16, 0.9)',
                    borderColor: 'var(--border-color)',
                    textStyle: { color: '#fff' }
                },
                legend: {
                    data: ['å‘æ˜ä¸“åˆ©', 'å®ç”¨æ–°å‹', 'å¤–è§‚è®¾è®¡'],
                    top: 0, // ç§»åˆ°é¡¶éƒ¨ä»¥èŠ‚çœç©ºé—´
                    right: '5%',
                    textStyle: { color: 'rgba(255,255,255,0.6)', fontSize: 10 }
                },
                grid: { left: '3%', right: '5%', top: '25', bottom: '25', containLabel: true }, // è°ƒæ•´å†…è¾¹è·é€‚åº”æ–°å¸ƒå±€
                xAxis: {
                    type: 'category',
                    boundaryGap: false,
                    data: years,
                    axisLine: { lineStyle: { color: 'rgba(255,255,255,0.2)' } },
                    axisLabel: {
                        color: 'rgba(255, 255, 255, 0.8)',
                        fontSize: 10,
                        margin: 10
                    }
                },
                yAxis: [
                    {
                        type: 'value',
                        name: 'å®ç”¨/å¤–è§‚',
                        position: 'left',
                        nameTextStyle: { color: 'rgba(255,255,255,0.4)', padding: [0, 0, 0, 30] }, // å¢åŠ å†…è¾¹è·é˜²æ­¢é‡å 
                        splitLine: { lineStyle: { color: 'rgba(255,255,255,0.05)' } }
                    },
                    {
                        type: 'value',
                        name: 'å‘æ˜ä¸“åˆ©',
                        position: 'right',
                        nameTextStyle: { color: 'rgba(255,255,255,0.4)', padding: [0, 30, 0, 0] }, // å¢åŠ å†…è¾¹è·é˜²æ­¢é‡å 
                        splitLine: { show: false }
                    }
                ],
                series: [
                    {
                        name: 'å‘æ˜ä¸“åˆ©',
                        type: 'line',
                        yAxisIndex: 1,
                        data: inventionDataActual,
                        smooth: true,
                        showSymbol: true,
                        symbolSize: 6,
                        lineStyle: { width: 3, color: '#0066ff', shadowBlur: 10, shadowColor: 'rgba(0,102,255,0.5)' }, // è“è‰²çº¿ï¼Œå¢åŠ é˜´å½±å¢å¼ºå¯è§åº¦
                        itemStyle: { color: '#0066ff', borderColor: '#fff', borderWidth: 1 },
                        areaStyle: {
                            color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [
                                { offset: 0, color: 'rgba(0, 102, 255, 0.3)' },
                                { offset: 1, color: 'transparent' }
                            ])
                        },
                        z: 3 // ç¡®ä¿åœ¨æœ€ä¸Šå±‚
                    },
                    {
                        name: 'å®ç”¨æ–°å‹',
                        type: 'line',
                        data: utilityData,
                        smooth: true,
                        showSymbol: true,
                        symbolSize: 6,
                        lineStyle: { width: 3, color: '#e60012', shadowBlur: 10, shadowColor: 'rgba(230,0,18,0.5)' }, // çº¢è‰²çº¿
                        itemStyle: { color: '#e60012', borderColor: '#fff', borderWidth: 1 },
                        areaStyle: {
                            color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [
                                { offset: 0, color: 'rgba(230, 0, 18, 0.3)' },
                                { offset: 1, color: 'transparent' }
                            ])
                        },
                        z: 2
                    },
                    {
                        name: 'å¤–è§‚è®¾è®¡',
                        type: 'line',
                        data: designData,
                        smooth: true,
                        showSymbol: true,
                        symbolSize: 6,
                        lineStyle: { width: 3, color: '#fadb14', shadowBlur: 10, shadowColor: 'rgba(250,219,20,0.5)' }, // é»„è‰²çº¿
                        itemStyle: { color: '#fadb14', borderColor: '#fff', borderWidth: 1 },
                        areaStyle: {
                            color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [
                                { offset: 0, color: 'rgba(250, 219, 20, 0.3)' },
                                { offset: 1, color: 'transparent' }
                            ])
                        },
                        z: 1
                    }
                ]
            });
        }

        // --- è‡ªåŠ¨æ›´æ–°æ—¶é—´å¾®åŠ¨ ---
        function startUpdateTime() {
            let minutes = 2;
            setInterval(() => {
                minutes++;
                document.getElementById('lastUpdateTime').textContent = `æ•°æ®æœ€åæ›´æ–°ï¼š${minutes}åˆ†é’Ÿå‰`;
            }, 60000);
        }

        // --- åˆå§‹åŒ–å…¨éƒ¨ ---
        window.addEventListener('load', () => {
            renderTable();
            initPatentCarousel();
            initTrendChart();
            startUpdateTime();

            window.addEventListener('resize', () => {
                const chart = echarts.getInstanceByDom(document.getElementById('trendChart'));
                if (chart) chart.resize();
            });
        });
    </script>
</body>

</html>