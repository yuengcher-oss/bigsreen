<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <link
        href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Noto+Sans+SC:wght@300;400;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="shared/system.css">
    <style>
        body {
            background: #02060a;
            padding: 0;
            margin: 0;
            overflow: hidden;
            font-family: 'Noto Sans SC', sans-serif;
            color: #fff;
        }

        .page-container {
            height: 100vh;
            width: 100vw;
            padding: 24px;
            box-sizing: border-box;
            background: #050a10 radial-gradient(circle at 50% 50%, rgba(230, 0, 18, 0.03) 0%, transparent 80%);
            display: flex;
            overflow: hidden;
        }

        /* --- 超高密度网格系统 --- */
        .hr-grid {
            flex: 1;
            display: grid;
            /* 24列，每列等宽 */
            grid-template-columns: repeat(24, 1fr);
            /* 根据屏幕高度自动计算行高，保持正方形感 */
            grid-template-rows: repeat(16, 1fr);
            gap: 8px;
            width: 100%;
            height: 100%;
        }

        /* 基础块样式 */
        .grid-item {
            background: rgba(255, 255, 255, 0.02);
            border: 1px solid rgba(255, 255, 255, 0.03);
            border-radius: 4px;
            position: relative;
            overflow: hidden;
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* 指标色块 */
        .stat-block {
            background: #e60012; /* 主题色红色 */
            border: none;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 5;
            box-shadow: 0 5px 15px rgba(230, 0, 18, 0.4);
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .stat-block:hover {
            background: rgba(255, 255, 255, 0.9);
            box-shadow: 0 10px 30px rgba(230, 0, 18, 0.6);
        }

        .stat-block:hover .stat-label,
        .stat-block:hover .stat-value {
            color: #e60012 !important;
            text-shadow: none;
        }

        .stat-block.brand-red {
            background: #ffcc00; /* 使用辅助色黄色区分总数，或者保持红色但增加光效 */
            color: #000;
            box-shadow: 0 10px 30px rgba(255, 204, 0, 0.3);
        }

        .stat-block.brand-red:hover {
            background: #fff;
        }

        .stat-block.brand-red:hover .stat-label,
        .stat-block.brand-red:hover .stat-value {
            color: #e60012 !important;
        }

        .brand-red .stat-label {
            color: rgba(0, 0, 0, 0.8);
        }

        .brand-red .stat-value {
            color: #000;
        }

        .stat-label {
            font-size: 12px;
            color: rgba(255, 255, 255, 0.9);
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: bold;
        }

        .stat-value {
            font-family: 'Orbitron', sans-serif;
            font-size: 24px;
            font-weight: bold;
            color: #fff;
        }

        .brand-red .stat-value {
            font-size: 64px;
            margin: 10px 0;
            text-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        }

        .stat-value span {
            font-size: 14px;
            margin-left: 5px;
            font-family: 'Noto Sans SC', sans-serif;
            opacity: 0.8;
        }

        /* 杰出员工(大照片) */
        .hero-member {
            cursor: pointer;
            border: 1px solid rgba(255, 255, 255, 0.05);
            z-index: 4;
        }

        .hero-member:hover {
            transform: scale(1.02);
            z-index: 100 !important;
            border-color: var(--primary-red);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.6);
        }

        .hero-member:hover .hero-name {
            color: var(--primary-red);
            text-shadow: 0 0 10px rgba(230, 0, 18, 0.5);
        }

        .hero-member img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: all 0.6s ease;
        }

        .hero-info {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(transparent, rgba(0, 0, 0, 0.9));
            padding: 15px;
            pointer-events: none;
        }

        .hero-name {
            font-size: 16px;
            font-weight: bold;
            color: #fff;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.8);
        }

        .hero-tag {
            font-size: 11px;
            color: rgba(255, 255, 255, 0.5);
        }

        /* 普通照片墙照片 */
        .grid-photo {
            opacity: 0.4;
            transition: opacity 1s ease;
        }

        .grid-photo img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
        }

        .grid-photo.changing {
            opacity: 0.1;
        }

        /* --- 详情弹窗 --- */
        .detail-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            backdrop-filter: blur(20px);
            z-index: 1000;
            display: none;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: all 0.4s ease;
        }

        .detail-card {
            width: 800px;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 40px;
            display: flex;
            align-items: flex-start;
            gap: 40px;
            transform: scale(0.9);
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .detail-photo-wrapper {
            flex: 0 0 240px;
            height: 320px;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
        }

        .detail-card img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
        }

        .detail-name {
            font-size: 36px;
            font-weight: 700;
            color: #fff;
            margin-bottom: 5px;
            text-shadow: 0 0 20px rgba(230, 0, 18, 0.4);
        }

        .detail-title {
            font-size: 16px;
            color: rgba(255, 255, 255, 0.4);
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .detail-achievements {
            font-size: 16px;
            line-height: 1.8;
            color: rgba(255, 255, 255, 0.8);
        }

        .close-btn {
            position: absolute;
            top: 25px;
            right: 25px;
            cursor: pointer;
            color: rgba(255, 255, 255, 0.3);
            font-size: 32px;
            transition: color 0.3s;
        }

        .close-btn:hover {
            color: #fff;
        }
    </style>
</head>

<body>
    <div class="page-container">
        <div class="hr-grid" id="hrGrid">
            <!-- 脚本将根据精细坐标填充内容 -->
        </div>
    </div>

    <!-- 详情弹窗 (保持不变) -->
    <div class="detail-overlay" id="detailOverlay" onclick="closeDetail()">
        <div class="detail-card" onclick="event.stopPropagation()">
            <div class="close-btn" onclick="closeDetail()">&times;</div>
            <div id="detailPhotoBox" class="detail-photo-wrapper"></div>
            <div class="detail-content">
                <div class="detail-name" id="dName">姓名</div>
                <div class="detail-title" id="dTitle">职位称号</div>
                <div class="detail-achievements" id="dDesc">杰出事项描述文字...</div>
            </div>
        </div>
    </div>

    <script src="employee_data.js"></script>
    <script>
        const grid = document.getElementById('hrGrid');
        const COLS = 24;
        const ROWS = 16;
        let allImages = [];

        // 杰出员工数据
        const heroData = [
            { name: '唐成凤', title: '杰出员工 / 全国劳模', desc: '自2007年进入四川锅炉厂（2009年改制为四川川锅锅炉有限责任公司）至今，从事承压元件的焊接工作多年，直到2019年调入公司焊培中心做培训老师。在做焊工期间，长期担任公司各型压力容器、压力管道、化工石油容器、等重要承压焊缝的焊接，以扎实的焊接技能出色的完成各项高难度、高要求的焊接任务，从未发生过一例质量事故。并运用所掌握的焊接知识和技能在生产中解决各类焊接问题，改进焊接方法，提高焊接质量和生产效率。', photoIdx: 880 },
            { name: '叶友兴', title: '杰出员工 / 首席技师', desc: '精通精密加工技术，带领团队在高压容器密封面加工工艺上取得重大突破，提升产品质量标准。', photoIdx: 220 },
            { name: '张素真', title: '技术骨干 / 高级技师', desc: '致力于产品质量检测与控制，建立完善的无损检测体系，确保出厂产品合格率始终维持100%。', photoIdx: 330 },
            { name: '周志林', title: '四川省劳动模范', desc: '在军工起源项目中表现出色，带领团队完成高压容器研发，确保国家重点任务按期交付。', photoIdx: 440 },
            { name: '张发强', title: '金牌技师', desc: '专注于CFB锅炉精密零部件加工，创造多项行业加工纪录，是公司不可替代的“大国工匠”。', photoIdx: 550 },
            { name: '陈红梅', title: '杰出奉献奖', desc: '长期扎根基层管理，建立完善的人才培养体系，为公司输送了上百名优质中高级技工。', photoIdx: 660 },
            { name: '赵宏兵', title: '创新先锋 / 高级工', desc: '拥有多项实用新型专利，在锅炉节能降耗技术上实现重大突破，年节约燃料成本数百万元。', photoIdx: 770 },
            { name: '孙亮', title: '优秀团队长', desc: '带领团队在海外项目中连续奋战120天，克服恶劣环境，圆满完成越南、伊朗等站点的调试。', photoIdx: 110 }
        ];

        // 核心统计指标
        const statsData = [
            { label: '工程师团队', value: '139' },
            { label: '高级工', value: '35' },
            { label: '高级技师', value: '33' },
            { label: '技师权益', value: '62' }
        ];

        // 定义大模块的摆放位置 (x, y 为起始坐标, w, h 为占位跨度)
        const placements = [
            // 核心红色总人数块 (保持视觉中心)
            { type: 'total', x: 8, y: 7, w: 8, h: 4 },

            // 8 位英雄 (缩小尺寸，面积控制在 9-12 格)
            { type: 'hero', x: 2, y: 2, w: 3, h: 4, idx: 0 }, // 12格
            { type: 'hero', x: 19, y: 2, w: 4, h: 3, idx: 1 }, // 12格
            { type: 'hero', x: 2, y: 11, w: 3, h: 3, idx: 2 }, // 9格
            { type: 'hero', x: 20, y: 11, w: 3, h: 3, idx: 3 }, // 9格
            { type: 'hero', x: 8, y: 2, w: 4, h: 3, idx: 4 }, // 12格
            { type: 'hero', x: 17, y: 12, w: 2, h: 3, idx: 5 }, // 6格
            { type: 'hero', x: 14, y: 1, w: 3, h: 4, idx: 6 }, // 12格
            { type: 'hero', x: 19, y: 6, w: 4, h: 3, idx: 7 }, // 12格

            // 4 个指标小块 (维持紧凑)
            { type: 'stat', x: 3, y: 8, w: 3, h: 2, idx: 0 },
            { type: 'stat', x: 17, y: 7, w: 2, h: 2, idx: 1 },
            { type: 'stat', x: 8, y: 12, w: 3, h: 2, idx: 2 },
            { type: 'stat', x: 13, y: 12, w: 3, h: 2, idx: 3 }
        ];

        function initGrid() {
            allImages = window.employeeData;
            if (!allImages) return;

            grid.innerHTML = '';
            // 记录已占用的单元格
            const occupied = Array.from({ length: ROWS }, () => Array(COLS).fill(false));

            // 1. 先放置预定义的“重点模块”
            placements.forEach(p => {
                const el = document.createElement('div');
                el.className = 'grid-item';
                el.style.gridColumn = `${p.x} / span ${p.w}`;
                el.style.gridRow = `${p.y} / span ${p.h}`;

                if (p.type === 'total') {
                    el.classList.add('stat-block', 'brand-red');
                    el.innerHTML = `
                        <div class="stat-label" style="font-size:14px; opacity:0.8; margin-bottom:0;">Corporate Workforce</div>
                        <div class="stat-value" style="font-size:54px;">1451<span style="font-size:18px;">人</span></div>
                    `;
                } else if (p.type === 'hero') {
                    const hero = heroData[p.idx];
                    el.classList.add('hero-member');
                    el.innerHTML = `
                        <img src="${allImages[hero.photoIdx]}" alt="${hero.name}">
                        <div class="hero-info" style="padding: 10px;">
                            <div class="hero-name" style="font-size:14px;">${hero.name}</div>
                            <div class="hero-tag" style="font-size:10px;">${hero.title}</div>
                        </div>
                    `;
                    el.onclick = () => showDetail(hero.name, hero.title, hero.desc, allImages[hero.photoIdx]);
                } else if (p.type === 'stat') {
                    const stat = statsData[p.idx];
                    el.classList.add('stat-block');
                    el.innerHTML = `
                        <div class="stat-label" style="font-size:10px;">${stat.label}</div>
                        <div class="stat-value" style="font-size:20px;">${stat.value}<span style="font-size:12px;">人</span></div>
                    `;
                }

                grid.appendChild(el);

                // 标记占用
                for (let r = p.y - 1; r < p.y - 1 + p.h; r++) {
                    for (let c = p.x - 1; c < p.x - 1 + p.w; c++) {
                        if (r < ROWS && c < COLS) occupied[r][c] = true;
                    }
                }
            });

            // 2. 填充剩余空隙为小照片 (1x1)
            for (let r = 0; r < ROWS; r++) {
                for (let c = 0; c < COLS; c++) {
                    if (!occupied[r][c]) {
                        const photo = document.createElement('div');
                        photo.className = 'grid-item grid-photo';
                        photo.style.gridColumn = `${c + 1}`;
                        photo.style.gridRow = `${r + 1}`;

                        const imgUrl = allImages[Math.floor(Math.random() * allImages.length)];
                        photo.innerHTML = `<img src="${imgUrl}" loading="lazy">`;
                        grid.appendChild(photo);
                    }
                }
            }

            startRandomCarousel();
        }

        // 异步轮播效果
        function startRandomCarousel() {
            setInterval(() => {
                const photos = document.querySelectorAll('.grid-photo');
                // 增加单次更换数量到 12 个，使在大屏上动态感更明显
                for (let i = 0; i < 12; i++) {
                    const target = photos[Math.floor(Math.random() * photos.length)];
                    if (!target) continue;

                    target.classList.add('changing');
                    setTimeout(() => {
                        const newImg = allImages[Math.floor(Math.random() * allImages.length)];
                        const img = target.querySelector('img');
                        if (img && newImg) img.src = newImg;
                        target.classList.remove('changing');
                    }, 1000);
                }
            }, 2000); // 缩短间隔到 2s
        }

        function showDetail(name, title, desc, img) {
            document.getElementById('dName').textContent = name;
            document.getElementById('dTitle').textContent = title;
            document.getElementById('dDesc').textContent = desc;
            document.getElementById('detailPhotoBox').innerHTML = `<img src="${img}" style="width:100%; height:100%; object-fit:cover;">`;

            const overlay = document.getElementById('detailOverlay');
            overlay.style.display = 'flex';
            setTimeout(() => {
                overlay.style.opacity = '1';
                overlay.querySelector('.detail-card').style.transform = 'scale(1)';
            }, 10);
        }

        function closeDetail() {
            const overlay = document.getElementById('detailOverlay');
            overlay.style.opacity = '0';
            overlay.querySelector('.detail-card').style.transform = 'scale(0.85)';
            setTimeout(() => { overlay.style.display = 'none'; }, 400);
        }

        document.addEventListener('DOMContentLoaded', initGrid);
    </script>
</body>

</html>