<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <title>åˆ¶é€ å¼•æ“ - 4-3 ç”Ÿäº§ååŒ</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.bootcdn.net/ajax/libs/echarts/5.4.3/echarts.min.js"></script>
    <style>
        :root {
            --primary-red: #e60012;
            --secondary-blue: #0066ff;
            --accent-gold: #ffcc00;
            --bg-color: #0b0d11;
            --card-bg: rgba(15, 17, 21, 0.95);
            --glass-bg: rgba(255, 255, 255, 0.02);
            --glass-border: rgba(255, 255, 255, 0.08);
            --text-secondary: rgba(255, 255, 255, 0.7);
            --card-radius: 12px;
        }

        body {
            margin: 0;
            padding: 0;
            background: var(--bg-color);
            color: #fff;
            font-family: "Microsoft YaHei", sans-serif;
            overflow: hidden;
            width: 100vw;
            height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .page-container {
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            background: radial-gradient(circle at 50% 50%, #161a21 0%, #0b0d11 100%);
        }

        /* é¡¶éƒ¨ Tab æ æ ·å¼ */
        .tab-header {
            height: 60px;
            background: rgba(255, 255, 255, 0.02);
            border-bottom: 1px solid var(--glass-border);
            display: flex;
            align-items: center;
            padding: 0 40px;
            gap: 10px;
            flex-shrink: 0;
        }

        .tab-item {
            padding: 8px 24px;
            cursor: pointer;
            color: rgba(255, 255, 255, 0.6);
            border-radius: 4px;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 16px;
            position: relative;
            background: rgba(255, 255, 255, 0.02);
            border: 1px solid transparent;
        }

        .tab-item:hover {
            background: rgba(230, 0, 18, 0.05);
            color: var(--primary-red);
            border-color: rgba(230, 0, 18, 0.2);
        }

        .tab-item.active {
            background: rgba(230, 0, 18, 0.1);
            color: #fff;
            border: 1px solid var(--primary-red);
            font-weight: bold;
            box-shadow: 0 0 15px rgba(230, 0, 18, 0.15);
        }

        .tab-item.active:hover {
            color: #fff;
            background: rgba(230, 0, 18, 0.15);
        }

        .tab-item.active .tab-icon {
            filter: drop-shadow(0 0 5px var(--primary-red));
        }

        /* å†…å®¹åŒºåŸŸæ ·å¼ */
        .tab-content {
            flex: 1;
            padding: 20px 40px;
            display: none;
            overflow: hidden;
            flex-direction: column;
            gap: 20px;
        }

        .tab-content.active {
            display: flex;
        }

        /* é€šç”¨ç»ç’ƒå¡ç‰‡å¢å¼º */
        .glass-card {
            padding: 24px;
            background: var(--card-bg);
            border: 1px solid var(--glass-border);
            border-radius: var(--card-radius);
            display: flex;
            flex-direction: column;
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.4);
            backdrop-filter: blur(15px);
            transition: all 0.3s ease;
        }

        .glass-card:hover {
            border-color: rgba(230, 0, 18, 0.3);
            background: rgba(15, 17, 21, 0.98);
        }

        .glass-card:hover h2 {
            color: var(--primary-red) !important;
            text-shadow: 0 0 10px rgba(230, 0, 18, 0.4);
        }

        .glass-card:hover .info-title,
        .glass-card:hover .factory-name {
            color: var(--primary-red);
        }

        /* å›¾è¡¨å®¹å™¨ */
        .chart-container {
            flex: 1;
            min-height: 0;
        }

        /* ç”˜ç‰¹å›¾ä¸“ç”¨æ ·å¼ (Tab 1) */
        .gantt-container {
            display: flex;
            flex-direction: column;
            overflow: hidden;
            position: relative;
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            background: rgba(0, 0, 0, 0.2);
        }

        .gantt-header {
            display: flex;
            background: rgba(255, 255, 255, 0.05);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            position: sticky;
            top: 0;
            z-index: 10;
        }

        .gantt-header-left {
            width: 280px; /* å›ºå®šå·¦ä¾§å®½åº¦ */
            flex-shrink: 0;
            border-right: 1px solid rgba(255, 255, 255, 0.1);
            padding: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            background: rgba(30, 30, 35, 0.95);
            z-index: 20;
        }

        .gantt-timeline-container {
            flex: 1;
            overflow-x: auto; /* å…è®¸æ¨ªå‘æ»šåŠ¨ */
            overflow-y: hidden;
            position: relative;
            scrollbar-width: thin;
            scrollbar-color: rgba(255, 255, 255, 0.2) rgba(0, 0, 0, 0.1);
        }

        /* è‡ªå®šä¹‰æ»šåŠ¨æ¡ */
        .gantt-timeline-container::-webkit-scrollbar {
            height: 8px;
        }
        
        .gantt-timeline-container::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.1);
        }
        
        .gantt-timeline-container::-webkit-scrollbar-thumb {
            background-color: rgba(255, 255, 255, 0.2);
            border-radius: 4px;
        }

        .gantt-header-months {
            display: flex;
            min-width: 100%; /* ç¡®ä¿è‡³å°‘å¡«æ»¡å®¹å™¨ */
        }

        .gantt-month-cell {
            width: 100px; /* æ¯ä¸ªæœˆå›ºå®šå®½åº¦ */
            flex-shrink: 0;
            text-align: center;
            padding: 10px 0;
            border-right: 1px solid rgba(255, 255, 255, 0.05);
            font-size: 13px;
            color: rgba(255, 255, 255, 0.8);
            position: relative;
        }
        
        .gantt-month-cell.current-month {
            background: rgba(230, 0, 18, 0.1);
            color: #fff;
            font-weight: bold;
        }
        
        .current-month-indicator {
            position: absolute;
            top: 0;
            bottom: 0;
            left: 50%;
            width: 2px;
            background: var(--primary-red);
            z-index: 5;
            box-shadow: 0 0 10px var(--primary-red);
            pointer-events: none;
            /* å»¶ä¼¸åˆ°æ•´ä¸ªè¡¨æ ¼é«˜åº¦ */
            height: 1000px; 
        }

        .gantt-body {
            display: flex;
            flex-direction: column;
            overflow-y: auto;
            max-height: 600px;
        }

        .gantt-row {
            display: flex;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            min-height: 50px;
        }

        .gantt-row:hover {
            background: rgba(255, 255, 255, 0.02);
        }

        .gantt-row-left {
            width: 280px;
            flex-shrink: 0;
            border-right: 1px solid rgba(255, 255, 255, 0.1);
            padding: 10px 15px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            background: rgba(30, 30, 35, 0.5);
            position: sticky;
            left: 0;
            z-index: 5; /* ç¡®ä¿å›ºå®šåœ¨å·¦ä¾§ */
        }

        .gantt-row-right {
            display: flex;
            position: relative;
            /* å®½åº¦éœ€è¦ä¸è¡¨å¤´æœˆä»½æ€»å®½åº¦ä¸€è‡´ */
        }

        .gantt-grid-cell {
            width: 100px;
            flex-shrink: 0;
            border-right: 1px solid rgba(255, 255, 255, 0.05);
            height: 100%;
        }
        
        .gantt-grid-cell.current-month {
            background: rgba(230, 0, 18, 0.03);
        }

        .gantt-bar-container {
            position: absolute;
            top: 5px;
            bottom: 5px;
            left: 0;
            right: 0;
            display: flex;
            align-items: center;
        }

        .gantt-bar {
            position: absolute;
            height: 24px;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            color: #fff;
            white-space: nowrap;
            overflow: hidden;
            box-shadow: 0 2px 5px rgba(0,0,0,0.3);
            cursor: pointer;
            transition: transform 0.2s, z-index 0.2s;
            border: 1px solid rgba(255,255,255,0.2);
        }
        
        .gantt-bar:hover {
            transform: scale(1.05);
            z-index: 10;
            box-shadow: 0 5px 15px rgba(0,0,0,0.5);
        }
        
        .project-id {
            font-weight: bold;
            color: #fff;
            font-size: 13px;
        }
        
        .project-name {
            font-size: 11px;
            color: rgba(255, 255, 255, 0.6);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .project-type-tag {
            display: inline-block;
            padding: 2px 6px;
            border-radius: 3px;
            font-size: 10px;
            margin-top: 4px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        /* ç”Ÿäº§å·¥åºè·Ÿè¸ª (Tab 2) */
        .filter-row {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
            align-items: center;
            flex-wrap: wrap;
            background: rgba(255, 255, 255, 0.02);
            padding: 15px;
            border-radius: 8px;
            border: 1px solid var(--glass-border);
        }

        .filter-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 13px;
            color: var(--text-secondary);
        }

        .filter-input {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--glass-border);
            color: #fff;
            padding: 6px 12px;
            border-radius: 4px;
            outline: none;
            font-size: 12px;
            transition: all 0.3s;
        }

        .filter-input:focus {
            border-color: var(--primary-red);
            background: rgba(255, 255, 255, 0.08);
        }

        .status-legend {
            display: flex;
            gap: 20px;
            margin-top: 20px;
            font-size: 12px;
            padding: 12px;
            background: rgba(255, 255, 255, 0.02);
            border-radius: 6px;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .legend-item:hover {
            color: var(--primary-red);
        }

        .dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
        }

        /* è¿›åº¦æ¡æ ·å¼ */
        .progress-cell {
            width: 120px;
            height: 16px;
            background: rgba(255,255,255,0.05);
            border-radius: 8px;
            overflow: hidden;
            position: relative;
            margin: 0 auto;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .progress-fill {
            height: 100%;
            background: var(--primary-red);
            transition: width 0.3s;
            box-shadow: 0 0 10px rgba(230, 0, 18, 0.3);
        }

        .progress-text {
            position: absolute;
            width: 100%;
            text-align: center;
            font-size: 10px;
            line-height: 14px;
            top: 0;
            color: #fff;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.8);
            font-weight: bold;
        }

        /* ç®¡å­åˆ†å‚ (Tab 3) */
        .factory-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            grid-template-rows: auto 1fr;
            gap: 20px;
            flex: 1;
            min-height: 0;
        }

        .factory-card {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            padding: 15px;
            display: flex;
            flex-direction: column;
        }
    </style>

</head>

<body>
    <!-- é¡¶éƒ¨å¯¼èˆª -->
    <div class="tab-header">
        <div class="tab-item active" onclick="switchTab(0)">é¡¹ç›®å®Œå·¥æ€»è§ˆ</div>
        <div class="tab-item" onclick="switchTab(1)">ç”Ÿäº§å·¥åºè·Ÿè¸ª</div>
        <div class="tab-item" onclick="switchTab(2)">ç®¡å­åˆ†å‚</div>
        <div class="tab-item" onclick="switchTab(3)">é›†ç®±åˆ†å‚</div>
        <div class="tab-item" onclick="switchTab(4)">æ ¸å®¹åˆ†å‚</div>
        <div class="tab-item" onclick="switchTab(5)">ç§‘æ³°è¾¾</div>
    </div>

    <!-- å†…å®¹åŒºåŸŸ -->
    <div id="content-0" class="tab-content active">
        <div class="glass-card" style="flex: 1; overflow: hidden;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                <h2 style="color: #fff; font-size: 18px; margin: 0; padding-left: 12px; border-left: 4px solid var(--primary-red); text-shadow: 0 0 10px rgba(230, 0, 18, 0.3);">é¡¹ç›®è¿›åº¦ç”˜ç‰¹å›¾</h2>
                <div style="color: var(--text-secondary); font-size: 12px;">å½“å‰æœˆä»½ï¼š2026å¹´02æœˆ</div>
            </div>

            <div class="gantt-container" id="ganttChart">
                <!-- å¤´éƒ¨ï¼šå·¦ä¾§å›ºå®šåˆ— + å³ä¾§å¯æ»šåŠ¨æ—¶é—´è½´ -->
                <div class="gantt-header">
                    <div class="gantt-header-left">é¡¹ç›®åç§° / ç¼–å·</div>
                    <div class="gantt-timeline-container" id="ganttTimelineHeader">
                        <div class="gantt-header-months" id="monthHeader">
                            <!-- åŠ¨æ€ç”Ÿæˆæœˆä»½ -->
                        </div>
                    </div>
                </div>

                <!-- ä¸»ä½“ï¼šå·¦ä¾§å›ºå®šåˆ— + å³ä¾§å¯æ»šåŠ¨å†…å®¹ -->
                <div class="gantt-body" id="ganttBodyContainer">
                    <div id="ganttRows">
                        <!-- åŠ¨æ€ç”Ÿæˆè¡Œ -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="content-1" class="tab-content">
        <div class="glass-card" style="flex: 1;">
            <div class="filter-row">
                <div class="filter-item">
                    <span>è®¡åˆ’æœˆä»½:</span>
                    <input type="month" class="filter-input" value="2025-12">
                    <span>è‡³</span>
                    <input type="month" class="filter-input" value="2026-03">
                </div>
                <div class="filter-item">
                    <span>çŠ¶æ€:</span>
                    <select class="filter-input">
                        <option>æ‰§è¡Œä¸­</option>
                        <option>å·²å®Œå·¥</option>
                    </select>
                </div>
                <div class="filter-item">
                    <span>ç»„ä»¶:</span>
                    <select class="filter-input">
                        <option>è†œå¼å£</option>
                        <option>è›‡å½¢ç®¡</option>
                        <option>é›†ç®±</option>
                        <option>é”…ç­’</option>
                    </select>
                </div>
                <div class="filter-item" style="margin-left: auto;">
                    <input type="text" class="filter-input" placeholder="è¯·è¾“å…¥ç”Ÿäº§ä»¤å·" style="width: 200px;">
                </div>
            </div>
            <div style="overflow: auto; flex: 1;">
                <table class="gantt-table" id="trackingTable">
                    <thead>
                        <tr>
                            <th style="width: 120px;">ç»„ä»¶å·</th>
                            <th style="width: 200px;">åç§°</th>
                            <th style="width: 120px;">è®¡åˆ’å®Œå·¥æ—¥æœŸ</th>
                            <th style="width: 120px;">ä¸»ä½“ææ–™</th>
                            <th style="width: 150px;">è‡ªåŠ¨ç„Š</th>
                            <th style="width: 150px;">è£…ç„Š</th>
                            <th style="width: 150px;">å®Œå·¥</th>
                        </tr>
                    </thead>
                    <tbody id="trackingBody">
                        <!-- å†…å®¹ç”± JS æ¸²æŸ“ -->
                    </tbody>
                </table>
            </div>
            <div class="status-legend">
                <div class="legend-item"><span class="dot" style="background: #22c55e;"></span> å·²å®Œæˆ</div>
                <div class="legend-item"><span class="dot" style="background: #0066ff;"></span> æ­£å¸¸</div>
                <div class="legend-item"><span class="dot" style="background: #ffcc00;"></span> å»¶æœŸå®Œæˆ</div>
                <div class="legend-item"><span class="dot" style="background: #ff4d4d;"></span> é¢„è­¦</div>
                <div class="legend-item"><span class="dot" style="background: #e60012;"></span> å‘Šè­¦</div>
            </div>
        </div>
    </div>

    <div id="content-2" class="tab-content">
        <!-- ç®¡å­åˆ†å‚ åµŒå…¥å›¾ç‰‡ -->
        <div class="glass-card" style="flex: 1; padding: 0; overflow: hidden; background: rgba(0, 0, 0, 0.2); border: 1px solid var(--glass-border);">
            <img src="pipe.png" alt="ç®¡å­åˆ†å‚çœ‹æ¿" style="width: 100%; height: 100%; object-fit: contain; display: block;">
        </div>
    </div>

    <div id="content-3" class="tab-content">
        <div class="glass-card" style="flex: 1; justify-content: center; align-items: center; background: rgba(0, 0, 0, 0.2);">
            <div style="text-align: center;">
                <div style="font-size: 48px; margin-bottom: 20px; opacity: 0.5;">ğŸ—ï¸</div>
                <div style="font-size: 24px; color: #fff; text-shadow: 0 0 15px rgba(230, 0, 18, 0.4);">é›†ç®±åˆ†å‚ç”Ÿäº§çœ‹æ¿</div>
                <div style="margin-top: 15px; color: var(--text-secondary); letter-spacing: 1px;">å®æ—¶æ•°æ®æ¥å£å¯¹æ¥ä¸­...</div>
            </div>
        </div>
    </div>

    <div id="content-4" class="tab-content">
        <div class="glass-card" style="flex: 1; justify-content: center; align-items: center; background: rgba(0, 0, 0, 0.2);">
            <div style="text-align: center;">
                <div style="font-size: 48px; margin-bottom: 20px; opacity: 0.5;">ğŸ§ª</div>
                <div style="font-size: 24px; color: #fff; text-shadow: 0 0 15px rgba(230, 0, 18, 0.4);">æ ¸å®¹åˆ†å‚ç”Ÿäº§çœ‹æ¿</div>
                <div style="margin-top: 15px; color: var(--text-secondary); letter-spacing: 1px;">å®æ—¶æ•°æ®æ¥å£å¯¹æ¥ä¸­...</div>
            </div>
        </div>
    </div>

    <div id="content-5" class="tab-content">
        <div class="glass-card" style="flex: 1; justify-content: center; align-items: center; background: rgba(0, 0, 0, 0.2);">
            <div style="text-align: center;">
                <div style="font-size: 48px; margin-bottom: 20px; opacity: 0.5;">âš™ï¸</div>
                <div style="font-size: 24px; color: #fff; text-shadow: 0 0 15px rgba(230, 0, 18, 0.4);">ç§‘æ³°è¾¾ç”Ÿäº§çœ‹æ¿</div>
                <div style="margin-top: 15px; color: var(--text-secondary); letter-spacing: 1px;">å®æ—¶æ•°æ®æ¥å£å¯¹æ¥ä¸­...</div>
            </div>
        </div>
    </div>


    <script>
        function switchTab(index) {
            // åˆ‡æ¢ Tab æŒ‰é’®çŠ¶æ€
            const tabs = document.querySelectorAll('.tab-item');
            tabs.forEach((tab, i) => {
                if (i === index) tab.classList.add('active');
                else tab.classList.remove('active');
            });

            // åˆ‡æ¢å†…å®¹åŒºåŸŸ
            const contents = document.querySelectorAll('.tab-content');
            contents.forEach((content, i) => {
                if (i === index) content.classList.add('active');
                else content.classList.remove('active');
            });

            // å¦‚æœåˆ‡æ¢åˆ°æŸäº› Tabï¼Œå¯èƒ½éœ€è¦é‡ç»˜å›¾è¡¨
            if (index === 2) {
                // Pipe factory charts if any
            }
        }

        // åˆå§‹åŒ–æ•°æ®
        function initGantt() {
            // é…ç½®å‚æ•°
            const START_DATE = new Date('2025-06-01');
            const END_DATE = new Date('2026-12-31');
            const CURRENT_DATE = new Date('2026-02-15'); // æ¨¡æ‹Ÿå½“å‰æ—¥æœŸ
            const MONTH_WIDTH = 100; // æ¯æœˆå®½åº¦ px

            // ç”Ÿæˆæœˆä»½æ•°ç»„
            const months = [];
            let d = new Date(START_DATE);
            while (d <= END_DATE) {
                months.push(new Date(d));
                d.setMonth(d.getMonth() + 1);
            }

            // é¡¹ç›®æ•°æ® (æ¨¡æ‹Ÿéè¿ç»­è®¡åˆ’)
            const projects = [
                { 
                    id: '1130177', 
                    name: 'ä¸­å›½äº”ç¯ä¸­çŸ³æ²¹å¡”é‡Œæœ¨é¡¹ç›®130t/hé”…ç‚‰', 
                    type: 'å‚å†…', 
                    tasks: [
                        { name: '1.0 æ°´å†·å£', start: '2025-07-25', end: '2025-08-15', color: '#0066ff' },
                        { name: '3.0 è¿‡çƒ­å™¨', start: '2025-07-25', end: '2025-08-20', color: '#ffcc00' },
                        // ç©ºæ¡£æœŸ
                        { name: '6.0 æ‚é¡¹ç®¡é“', start: '2025-09-10', end: '2025-09-30', color: '#e60012' },
                        { name: '9.0 é“­ç‰ŒåŠå¤‡ä»¶', start: '2025-10-05', end: '2025-10-20', color: '#666666' }
                    ]
                },
                { 
                    id: '1150049', 
                    name: 'æ–°ç–†æ˜Šæº2å°150å¨é«˜æ¸©é«˜å‹å¾ªç¯æµåŒ–åºŠé”…ç‚‰', 
                    type: 'å‚å†…', 
                    tasks: [
                        { name: '2.0 é’¢ç»“æ„', start: '2025-09-05', end: '2025-10-05', color: '#22c55e' },
                        { name: '0.0 é”…ç­’', start: '2025-09-13', end: '2025-10-15', color: '#0066ff' },
                        { name: '4.0 çœç…¤å™¨', start: '2025-10-20', end: '2025-11-20', color: '#e60012' },
                        // è·¨æœˆé•¿ä»»åŠ¡
                        { name: '1.0 æ°´å†·å£', start: '2025-11-25', end: '2026-01-15', color: '#0066ff' }
                    ]
                },
                { 
                    id: '1150050', 
                    name: 'æ–°ç–†æ˜Šæº2å°150å¨é«˜æ¸©é«˜å‹å¾ªç¯æµåŒ–åºŠé”…ç‚‰ (2#)', 
                    type: 'å‚å†…', 
                    tasks: [
                        { name: '2.0 é’¢ç»“æ„', start: '2025-09-20', end: '2025-10-20', color: '#22c55e' },
                        { name: '0.0 é”…ç­’', start: '2025-09-28', end: '2025-10-30', color: '#0066ff' },
                        { name: '4.0 çœç…¤å™¨', start: '2025-11-05', end: '2025-12-05', color: '#e60012' },
                        { name: '1.0 æ°´å†·å£', start: '2025-12-10', end: '2026-02-10', color: '#0066ff' }
                    ]
                },
                { 
                    id: '1160012', 
                    name: 'èƒ½æº-æ–°ç–†æ…§èƒ½-çƒ­é£ç‚‰æ€»åŒ… (A)', 
                    type: 'å‚å†…', 
                    tasks: [
                        { name: '3.0 è¿‡çƒ­å™¨', start: '2025-10-05', end: '2025-11-05', color: '#ffcc00' },
                        { name: '0.0 é”…ç­’', start: '2025-10-10', end: '2025-11-15', color: '#0066ff' },
                        // 2026å¹´ä»»åŠ¡
                        { name: '9.0 é“­ç‰ŒåŠå¤‡ä»¶', start: '2026-04-15', end: '2026-05-15', color: '#666666' }
                    ]
                },
                { 
                    id: '1160014', 
                    name: 'ä¸­å›½å¤©è¾°-KAZ Aktobe -ERGé¡¹ç›®', 
                    type: 'åˆ†åŒ…', 
                    tasks: [
                        { name: '2.0 é’¢ç»“æ„', start: '2025-12-16', end: '2026-03-16', color: '#22c55e' }
                    ]
                },
                { 
                    id: '1160015', 
                    name: 'ä¸­å›½å¤©è¾°-KAZ Aktobe -ERGé¡¹ç›® (äºŒæœŸ)', 
                    type: 'å‚å†…', 
                    tasks: [
                        { name: '2.0 é’¢ç»“æ„', start: '2025-11-15', end: '2026-01-15', color: '#22c55e' },
                        { name: '0.0 é”…ç­’', start: '2026-03-15', end: '2026-04-30', color: '#0066ff' },
                        { name: '1.0 æ°´å†·å£', start: '2026-03-15', end: '2026-05-15', color: '#0066ff' }
                    ]
                },
                { 
                    id: '1160016', 
                    name: 'å·é”…ç¯ä¿æŠšé¡ºæ–°é’¢160å¨åŒè¶…', 
                    type: 'å‚å†…', 
                    tasks: [
                        { name: '4.0 çœç…¤å™¨', start: '2025-11-15', end: '2025-12-30', color: '#e60012' },
                        { name: '0.0 é”…ç­’', start: '2025-12-15', end: '2026-01-30', color: '#0066ff' },
                        { name: '1.0 æ°´å†·å£', start: '2025-12-25', end: '2026-02-28', color: '#0066ff' },
                        { name: '10.0 å†çƒ­å™¨', start: '2025-12-25', end: '2026-02-15', color: '#0066ff' }
                    ]
                }
            ];

            // æ¸²æŸ“è¡¨å¤´æœˆä»½
            const headerEl = document.getElementById('monthHeader');
            const currentMonthStr = `${CURRENT_DATE.getFullYear()}-${String(CURRENT_DATE.getMonth() + 1).padStart(2, '0')}`;
            
            // è®¡ç®—å½“å‰æ—¶é—´æŒ‡ç¤ºçº¿çš„ä½ç½®
            let currentLineLeft = -1;
            
            // æ¸²æŸ“æœˆä»½
            headerEl.innerHTML = months.map((m, index) => {
                const mStr = `${m.getFullYear()}-${String(m.getMonth() + 1).padStart(2, '0')}`;
                const isCurrent = mStr === currentMonthStr;
                
                if (isCurrent) {
                    // ç²—ç•¥è®¡ç®—æŒ‡ç¤ºçº¿ä½ç½®ï¼šæœˆä»½ä¸­é—´
                    currentLineLeft = index * MONTH_WIDTH + (MONTH_WIDTH / 2);
                }

                return `
                    <div class="gantt-month-cell ${isCurrent ? 'current-month' : ''}">
                        ${mStr}
                        ${isCurrent ? '<div class="current-month-indicator"></div>' : ''}
                    </div>
                `;
            }).join('');

            // æ¸²æŸ“é¡¹ç›®è¡Œ
            const rowsEl = document.getElementById('ganttRows');
            rowsEl.innerHTML = projects.map(p => {
                // ç”Ÿæˆå·¦ä¾§ä¿¡æ¯
                const leftCol = `
                    <div class="gantt-row-left">
                        <div class="project-id">${p.id} <span class="project-type-tag" style="background:${p.type==='å‚å†…'?'rgba(0,102,255,0.2)':'rgba(34,197,94,0.2)'}">${p.type}</span></div>
                        <div class="project-name" title="${p.name}">${p.name}</div>
                    </div>
                `;

                // ç”Ÿæˆå³ä¾§ç”˜ç‰¹æ¡
                const barsHtml = p.tasks.map(task => {
                    const start = new Date(task.start);
                    const end = new Date(task.end);
                    
                    // è®¡ç®—åç§»é‡å’Œå®½åº¦
                    const diffTime = Math.abs(start - START_DATE);
                    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24)); 
                    // å‡è®¾æ¯ä¸ªæœˆ30å¤©ï¼Œè®¡ç®—å¤§æ¦‚åƒç´ ä½ç½®
                    // æ›´ç²¾ç¡®çš„åšæ³•æ˜¯è®¡ç®—æœˆä»½å·® + å‰©ä½™å¤©æ•°æ¯”ä¾‹
                    
                    const getPos = (date) => {
                        const mDiff = (date.getFullYear() - START_DATE.getFullYear()) * 12 + (date.getMonth() - START_DATE.getMonth());
                        const dayRatio = date.getDate() / new Date(date.getFullYear(), date.getMonth() + 1, 0).getDate();
                        return (mDiff + dayRatio) * MONTH_WIDTH;
                    };

                    const left = getPos(start);
                    const width = getPos(end) - left;

                    return `
                        <div class="gantt-bar" style="left: ${left}px; width: ${Math.max(width, 20)}px; background: ${task.color};" title="${task.name}: ${task.start} ~ ${task.end}">
                            ${task.name}
                        </div>
                    `;
                }).join('');

                // ç”ŸæˆèƒŒæ™¯ç½‘æ ¼
                const gridHtml = months.map((m, idx) => {
                     const mStr = `${m.getFullYear()}-${String(m.getMonth() + 1).padStart(2, '0')}`;
                     const isCurrent = mStr === currentMonthStr;
                     return `<div class="gantt-grid-cell ${isCurrent ? 'current-month' : ''}"></div>`;
                }).join('');

                return `
                    <div class="gantt-row">
                        ${leftCol}
                        <div class="gantt-row-right">
                            ${gridHtml}
                            <div class="gantt-bar-container">
                                ${barsHtml}
                            </div>
                        </div>
                    </div>
                `;
            }).join('');

            // åŒæ­¥æ»šåŠ¨å¤„ç†
            const headerScroll = document.getElementById('ganttTimelineHeader');
            const bodyContainer = document.getElementById('ganttBodyContainer');
            const rowRights = document.querySelectorAll('.gantt-row-right');
            
            // åˆå§‹æ»šåŠ¨åˆ°å½“å‰æœˆä»½é™„è¿‘
            if (currentLineLeft > 0) {
                const scrollInit = currentLineLeft - 300; // åç§»ä¸€ç‚¹ï¼Œè®©å½“å‰çº¿åœ¨ä¸­é—´åå·¦
                headerScroll.scrollLeft = scrollInit;
                // æ³¨æ„ï¼šè¿™é‡Œæˆ‘ä»¬é€šè¿‡æ”¹å˜ row-right çš„ transform æ¥æ¨¡æ‹Ÿæ»šåŠ¨ï¼Œæˆ–è€…è®© row-right è¶³å¤Ÿå®½å¹¶åœ¨çˆ¶å®¹å™¨æ»šåŠ¨
                // æ›´å¥½çš„æ–¹å¼æ˜¯ï¼šheaderScroll æ˜¯å”¯ä¸€çš„æ»šåŠ¨æºï¼Œæ§åˆ¶ä¸‹æ–¹æ‰€æœ‰ row-right çš„ transform
            }

            // ç»‘å®šæ»šåŠ¨äº‹ä»¶ï¼šå¤´éƒ¨æ»šåŠ¨ -> å¸¦åŠ¨ä¸‹æ–¹æ‰€æœ‰è¡Œçš„å†…å®¹å¹³ç§»
            // ç”±äºè¡Œæ•°å¯èƒ½å¾ˆå¤šï¼Œç›´æ¥æ“ä½œ DOM å¯èƒ½å¡é¡¿ã€‚
            // ä¼˜åŒ–æ–¹æ¡ˆï¼šgantt-body ä½œä¸ºä¸€ä¸ªæ•´ä½“å®¹å™¨ï¼Œå·¦å³æ»šåŠ¨æ—¶åŒæ­¥å¤´éƒ¨ã€‚
            
            // ä¿®æ­£ç»“æ„é€»è¾‘ï¼š
            // æˆ‘ä»¬éœ€è¦è®© gantt-body ä¹Ÿæ˜¯ä¸€ä¸ªå¯æ»šåŠ¨çš„å®¹å™¨ï¼Œæˆ–è€…æ¯ä¸€è¡Œéƒ½æ˜¯ã€‚
            // é‰´äºå¸ƒå±€å¤æ‚ï¼Œæœ€ç®€å•çš„æ–¹å¼æ˜¯ï¼š
            // è®© gantt-row-right éƒ½åœ¨ä¸€ä¸ªå¤§çš„ flex å®¹å™¨é‡Œï¼Œå¤–å±‚ gantt-body åªè´Ÿè´£å‚ç›´æ»šåŠ¨ã€‚
            // ä½†è¿™æ ·ä¼šå¯¼è‡´å·¦ä¾§å›ºå®šåˆ—å¾ˆéš¾å¤„ç†ã€‚
            
            // å½“å‰é‡‡ç”¨æ–¹æ¡ˆï¼š
            // gantt-header-months å®½åº¦å¾ˆå¤§ã€‚
            // gantt-row-right å®½åº¦ä¹Ÿå¾ˆå¤§ã€‚
            // ç›‘å¬ header çš„ scroll äº‹ä»¶ï¼Œå»è®¾ç½®æ‰€æœ‰ gantt-row-right çš„ transform translateX
            
            headerScroll.addEventListener('scroll', (e) => {
                const left = e.target.scrollLeft;
                rowRights.forEach(el => {
                    el.style.transform = `translateX(-${left}px)`;
                });
            });
            
            // åˆå§‹åŒ–ä½ç½®
             rowRights.forEach(el => {
                el.style.transform = `translateX(-${headerScroll.scrollLeft}px)`;
            });
        }

        function initTracking() {
            const body = document.getElementById('trackingBody');
            const data = [
                { id: '2820.101.0', name: 'ç‚‰è†›æ°´å†·å£', date: '2025-12-01', material: '-', auto: 0, weld: 100, done: 100 },
                { id: '2820.102.0', name: 'å¯¹æµæ°´å†·å£', date: '2025-12-01', material: '-', auto: 0, weld: 100, done: 100 },
                { id: '2820.104.0', name: 'åŒ…å¢™ç®¡', date: '2025-12-01', material: '10,554/10,554', auto: 100, weld: 100, done: 100 },
                { id: '1.2820.104.0', name: 'è¿‡çƒ­å™¨', date: '2025-12-15', material: '10,557/10,557', auto: 100, weld: 0, done: 0 },
                { id: '1.2820.101.0', name: 'çœç…¤å™¨', date: '2025-12-30', material: '38,682/38,682', auto: 100, weld: 0, done: 0 }
            ];

            body.innerHTML = data.map(d => `
                <tr>
                    <td>${d.id}</td>
                    <td>${d.name}</td>
                    <td>${d.date}</td>
                    <td>${d.material}</td>
                    <td>
                        <div class="progress-cell">
                            <div class="progress-fill" style="width: ${d.auto}%; background: ${d.auto === 100 ? '#22c55e' : d.auto > 0 ? '#0066ff' : 'transparent'}"></div>
                            <div class="progress-text">${d.auto}%</div>
                        </div>
                    </td>
                    <td>
                        <div class="progress-cell">
                            <div class="progress-fill" style="width: ${d.weld}%; background: ${d.weld === 100 ? '#22c55e' : d.weld > 0 ? '#0066ff' : 'transparent'}"></div>
                            <div class="progress-text">${d.weld}%</div>
                        </div>
                    </td>
                    <td>
                        <div class="progress-cell">
                            <div class="progress-fill" style="width: ${d.done}%; background: ${d.done === 100 ? '#22c55e' : d.done > 0 ? '#0066ff' : 'transparent'}"></div>
                            <div class="progress-text">${d.done}%</div>
                        </div>
                    </td>
                </tr>
            `).join('');
        }

        window.onload = () => {
            initGantt();
            initTracking();
        };
    </script>
</body>

</html>
